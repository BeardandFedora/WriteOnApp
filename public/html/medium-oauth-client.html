<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript">
	function getParameter(name) {
		var regex = new RegExp(name + "=(.+?)(&|$)");
		try {
			return decodeURI(regex.exec(location.search)[1]);
		} catch (e) {
			return undefined;
		}
	}
	var client_id = getParameter("client_id");
	var code = getParameter("code");
	if (client_id) {
		var state = "@n7FXUKKiE8x32MA#" + client_id;
		var redirectURI = location.href.substring(0, location.href.indexOf("?"));
		window.location.href = "https://medium.com/m/oauth/authorize?response_type=code&client_id="
			+ client_id + "&redirect_uri=" + redirectURI
			+ "&scope=basicProfile,publishPost,uploadImage,listPublications"
			+ "&state=" + state;
	} else {
		if (code) {
			localStorage["mediumCode"] = code;
		}
		window.close();
	}
</script>
</head>
</html>